graph LR
    subgraph "Endpoints Publicos"
        P1[GET /api/categories]
        P2[POST /api/users/login]
        P3[POST /api/users/simple-register]
        P4[GET /api/events]
        P5[GET /api/stages]
        P6[GET /api/stageresults]
        P7[GET /api/event-vehicles/participants]
        P8[GET /api/event-vehicles/byevent]
        P9[GET /api/users/check-email]
        P10[GET /api/users/oauth2/login-url]
        P11[OAuth2 endpoints]
    end
      subgraph "Solo Administradores"
        A1[GET /api/users]
        A2[PATCH /api/users/:id/admin]
        A3[Gestion completa vehiculos]
        A4[POST/PUT/DELETE /api/events]
        A5[POST/PUT/DELETE /api/stages]
        A6[POST/PUT/DELETE /api/stageresults]
        A7[PUT /api/stageresults/penalizacion/:id]
        A8[GET /api/stageresults/clasificacion]
        A9[POST /api/stageresults/update-elapsed-times]
        A10[POST/PUT/DELETE /api/categories]
        A11[GET /api/stageresults/by-event/:eventId]
        A12[Panel Admin Dashboard]
    end
      subgraph "Usuario Autenticado"
        U1[GET /api/users/:id "propio"]
        U2[PUT /api/users/:id "propio"]
        U3[GET /api/vehicles "propios"]
        U4[POST /api/vehicles]
        U5[PUT/DELETE /api/vehicles "propios"]
        U6[Gestion EventVehicle propios]
        U7[POST /api/users/:id/complete-profile]
        U8[GET /api/oauth2/profile-status]
        U9[PUT /api/users/:id/profile-picture]
    end
      subgraph "Mixtos Admin/Propietario"
        M1[StageResults especificos]
        M2[EventVehicles especificos]
        M3[Vehiculos por usuario especifico]
        M4[Clasificaciones publicas vs admin]
    end
    
    subgraph "OAuth2 & Auth"
        O1[GET /api/oauth2/success]
        O2[Frontend redirect handling]
        O3[JWT Token validation]
        O4[AuthUtils validation]
    end
    
    subgraph "Frontend Routes"
        F1[/ "HomePage"]
        F2[/clasificaciones]
        F3[/perfil]
        F4[/admin "Solo admins"]
        F5[/login]
        F6[/register]
    end 