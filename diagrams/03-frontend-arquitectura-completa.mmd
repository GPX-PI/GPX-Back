graph TB
    subgraph "Frontend - Arquitectura y Flujos Completos"        subgraph "Pages App Router"
            HOME_PAGE[page.tsx "HomePage"]
            CLASIF_PAGE[clasificaciones/page.tsx]
            PROFILE_PAGE[perfil/page.tsx]
            ADMIN_PAGE[admin/page.tsx]
            LOGIN_PAGE[login/page.tsx]
            REGISTER_PAGE[register/page.tsx]
        end
        
        subgraph "Atoms shadcn/ui"
            BUTTON[Button]
            INPUT[Input]
            LABEL[Label]
            CARD[Card + CardHeader + CardContent]
            BADGE[Badge]
            SELECT[Select + SelectItem]
            DIALOG[Dialog + DialogContent]
            TABLE[Table + TableHeader + TableRow]
            CHECKBOX[Checkbox]
            SWITCH[Switch]
            POPOVER[Popover + PopoverContent]
            TOAST[Toast + Sonner]
        end
          subgraph "Molecules Reusables"
            NAVBAR[Navbar "Navegacion principal"]
            SIDEBAR[Sidebar "Navegacion admin"]
            LOADING_SPINNER[LoadingSpinner]
            ERROR_BOUNDARY[ErrorBoundary]
            SEARCH_BAR[SearchBar]
            PAGINATION[Pagination]
            FILTERS[Filters]
            MODAL_WRAPPER[ModalWrapper]
        end
        
        subgraph "Organisms Complejos"
            ADMIN_DASHBOARD[AdminDashboard]
            EVENTS_MGMT[EventsManagement]
            USERS_MGMT[UsersManagement]
            CATEGORIES_MGMT[CategoriesManagement]
            STAGE_RESULTS_MGMT[StageResultsManagement]
            PROFILE_FORM[ProfileForm]
            VEHICLE_FORM[VehicleForm]
            CLASIF_TABLE[ClasificacionTable]
            EVENT_FORM[EventForm]
            PENALTY_DIALOG[PenaltyDialog]
        end
          subgraph "Templates Layouts"
            ADMIN_LAYOUT[AdminLayout "Sidebar + Content"]
            PROFILE_LAYOUT[ProfileLayout "User sidebar"]
            PUBLIC_LAYOUT[PublicLayout "Simple navbar"]
            AUTH_LAYOUT[AuthLayout "Centered forms"]
        end
        
        subgraph "Hooks Personalizados"
            USE_AUTH[useAuth]
            USE_API[useApi]
            USE_LOCAL_STORAGE[useLocalStorage]
            USE_DEBOUNCE[useDebounce]
            USE_PAGINATION[usePagination]
            USE_FORM_STATE[useFormState]
        end
          subgraph "Services API"
            AUTH_SERVICE[AuthService]
            EVENT_SERVICE[EventService]
            USER_SERVICE[UserService]
            VEHICLE_SERVICE[VehicleService]
            CATEGORY_SERVICE[CategoryService]
            STAGE_RESULT_SERVICE[StageResultService]
        end
        
        subgraph "Flujo Panel de Administracion"
            START[Usuario accede a /admin]
            CHECK_AUTH[Verificar autenticacion]
            CHECK_ADMIN[Verificar rol admin]
            REDIRECT[Redirigir a /login]
            
            subgraph "Dashboard Stats"
                STATS_EVENTS[Total eventos]
                STATS_USERS[Total usuarios]
                STATS_RECENT[Actividad reciente]
                STATS_FINISHED[Eventos finalizados]
            end
              subgraph "Events Management"
                LIST_EVENTS[Listar eventos]
                CREATE_EVENT[Crear evento]
                EDIT_EVENT[Editar evento]
                DELETE_EVENT[Eliminar evento]
            end
            
            subgraph "Users Management"
                LIST_USERS[Listar usuarios]
                TOGGLE_ADMIN[Cambiar rol admin]
                VIEW_VEHICLES[Ver vehiculos usuario]
                ADMIN_PROTECTION[Proteccion auto-admin]
            end
            
            subgraph "Categories Management"
                LIST_CATEGORIES[Listar categorias]
                CREATE_CATEGORY[Crear categoria]
                EDIT_CATEGORY[Editar categoria]
                DELETE_CATEGORY[Eliminar categoria]
            end
            
            subgraph "Stage Results Management"
                SELECT_EVENT[Seleccionar evento]
                LIST_RESULTS[Listar resultados]
                CREATE_RESULT[Crear resultado]
                EDIT_RESULT[Editar resultado basico]
                MANAGE_PENALTIES[Gestionar penalizaciones]
                FILTER_STAGE[Filtrar por etapa]
                FILTER_CATEGORY[Filtrar por categoria]
                COLUMN_TOGGLE[Alternar columnas]
            end
        end
    end
    
    %% Flujo de navegación principal
    HOME_PAGE --> PUBLIC_LAYOUT
    CLASIF_PAGE --> PUBLIC_LAYOUT
    LOGIN_PAGE --> AUTH_LAYOUT
    REGISTER_PAGE --> AUTH_LAYOUT
    PROFILE_PAGE --> PROFILE_LAYOUT
    ADMIN_PAGE --> ADMIN_LAYOUT
    
    %% Relaciones de layouts
    ADMIN_LAYOUT --> SIDEBAR
    ADMIN_LAYOUT --> ADMIN_DASHBOARD
    PROFILE_LAYOUT --> SIDEBAR
    PUBLIC_LAYOUT --> NAVBAR
    AUTH_LAYOUT --> CARD
    
    %% Flujo de administración
    START --> CHECK_AUTH    CHECK_AUTH --> |No autenticado| REDIRECT
    CHECK_AUTH --> |Autenticado| CHECK_ADMIN
    CHECK_ADMIN --> |No admin| REDIRECT
    CHECK_ADMIN --> |Admin| ADMIN_DASHBOARD
    
    %% Dashboard connections
    ADMIN_DASHBOARD --> STATS_EVENTS
    ADMIN_DASHBOARD --> STATS_USERS
    ADMIN_DASHBOARD --> STATS_RECENT
    ADMIN_DASHBOARD --> STATS_FINISHED
    ADMIN_DASHBOARD --> EVENTS_MGMT
    ADMIN_DASHBOARD --> USERS_MGMT
    ADMIN_DASHBOARD --> CATEGORIES_MGMT
    ADMIN_DASHBOARD --> STAGE_RESULTS_MGMT
    
    %% Management connections
    EVENTS_MGMT --> LIST_EVENTS
    EVENTS_MGMT --> CREATE_EVENT
    EVENTS_MGMT --> EDIT_EVENT
    EVENTS_MGMT --> DELETE_EVENT
    EVENTS_MGMT --> EVENT_FORM
    
    USERS_MGMT --> LIST_USERS
    USERS_MGMT --> TOGGLE_ADMIN
    USERS_MGMT --> VIEW_VEHICLES
    USERS_MGMT --> ADMIN_PROTECTION
    
    CATEGORIES_MGMT --> LIST_CATEGORIES
    CATEGORIES_MGMT --> CREATE_CATEGORY
    CATEGORIES_MGMT --> EDIT_CATEGORY
    CATEGORIES_MGMT --> DELETE_CATEGORY
    
    STAGE_RESULTS_MGMT --> SELECT_EVENT
    STAGE_RESULTS_MGMT --> LIST_RESULTS
    STAGE_RESULTS_MGMT --> CREATE_RESULT
    STAGE_RESULTS_MGMT --> EDIT_RESULT
    STAGE_RESULTS_MGMT --> MANAGE_PENALTIES
    STAGE_RESULTS_MGMT --> PENALTY_DIALOG
    
    %% Component usage
    EVENT_FORM --> DIALOG
    EVENT_FORM --> INPUT
    EVENT_FORM --> BUTTON
    
    LIST_USERS --> TABLE
    LIST_USERS --> SWITCH
    LIST_USERS --> BADGE
    
    PENALTY_DIALOG --> DIALOG
    PENALTY_DIALOG --> INPUT
    PENALTY_DIALOG --> SELECT
    
    %% Service connections
    EVENTS_MGMT --> EVENT_SERVICE
    USERS_MGMT --> USER_SERVICE
    CATEGORIES_MGMT --> CATEGORY_SERVICE
    STAGE_RESULTS_MGMT --> STAGE_RESULT_SERVICE
    
    %% Hook usage
    ADMIN_DASHBOARD --> USE_AUTH
    EVENTS_MGMT --> USE_API
    USERS_MGMT --> USE_PAGINATION
    STAGE_RESULTS_MGMT --> USE_FORM_STATE
    
    %% Estilos
    classDef page fill:#e8f5e8,stroke:#4caf50,stroke-width:2px
    classDef atom fill:#e1f5fe,stroke:#03a9f4,stroke-width:2px
    classDef molecule fill:#fce4ec,stroke:#e91e63,stroke-width:2px
    classDef organism fill:#fff3e0,stroke:#ff9800,stroke-width:2px
    classDef template fill:#f3e5f5,stroke:#9c27b0,stroke-width:2px
    classDef hook fill:#fff8e1,stroke:#ffc107,stroke-width:2px
    classDef service fill:#e0f2f1,stroke:#009688,stroke-width:2px
    classDef admin fill:#ffebee,stroke:#f44336,stroke-width:2px
    
    class HOME_PAGE,CLASIF_PAGE,PROFILE_PAGE,ADMIN_PAGE,LOGIN_PAGE,REGISTER_PAGE page
    class BUTTON,INPUT,LABEL,CARD,BADGE,SELECT,DIALOG,TABLE,CHECKBOX,SWITCH,POPOVER,TOAST atom
    class NAVBAR,SIDEBAR,LOADING_SPINNER,ERROR_BOUNDARY,SEARCH_BAR,PAGINATION,FILTERS,MODAL_WRAPPER molecule
    class ADMIN_DASHBOARD,EVENTS_MGMT,USERS_MGMT,CATEGORIES_MGMT,STAGE_RESULTS_MGMT,PROFILE_FORM,VEHICLE_FORM,CLASIF_TABLE,EVENT_FORM,PENALTY_DIALOG organism
    class ADMIN_LAYOUT,PROFILE_LAYOUT,PUBLIC_LAYOUT,AUTH_LAYOUT template
    class USE_AUTH,USE_API,USE_LOCAL_STORAGE,USE_DEBOUNCE,USE_PAGINATION,USE_FORM_STATE hook
    class AUTH_SERVICE,EVENT_SERVICE,USER_SERVICE,VEHICLE_SERVICE,CATEGORY_SERVICE,STAGE_RESULT_SERVICE service
    class START,CHECK_AUTH,CHECK_ADMIN,REDIRECT,STATS_EVENTS,STATS_USERS,STATS_RECENT,STATS_FINISHED,LIST_EVENTS,CREATE_EVENT,EDIT_EVENT,DELETE_EVENT,LIST_USERS,TOGGLE_ADMIN,VIEW_VEHICLES,ADMIN_PROTECTION,LIST_CATEGORIES,CREATE_CATEGORY,EDIT_CATEGORY,DELETE_CATEGORY,SELECT_EVENT,LIST_RESULTS,CREATE_RESULT,EDIT_RESULT,MANAGE_PENALTIES,FILTER_STAGE,FILTER_CATEGORY,COLUMN_TOGGLE admin
